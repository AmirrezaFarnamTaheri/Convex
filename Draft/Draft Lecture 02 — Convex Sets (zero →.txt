# Lecture 02 — Convex Sets (zero → hero, all the way down to bedrock)

Scope guard: this lecture is **only** about sets and geometry. No convex **functions**, no epigraphs, no subgradients, no KKT/duality, no algorithms. That’s for later. Here we build the geometry toolkit you’ll use everywhere else.

---

## 0) Coordinates, lines, and the grammar of combinations

### Lines and line segments

For (x_1,x_2\in\mathbb{R}^n):

* **Line through (x_1,x_2):** ({,\theta x_1 + (1-\theta) x_2 \mid \theta\in\mathbb{R},}).
* **Segment ( [x_1,x_2] ):** same expression, but with (0\le \theta\le 1).

### Three combination types (you’ll use these constantly)

* **Affine combination:** (\sum_{i=1}^k \theta_i x_i) with (\sum_i \theta_i=1) (weights free in sign).
* **Convex combination:** (\sum_i \theta_i x_i) with (\theta_i\ge 0) and (\sum_i \theta_i=1).
* **Conic (nonnegative) combination:** (\sum_i \theta_i x_i) with (\theta_i\ge 0) (no sum-to-one constraint).

These three give rise to **affine sets**, **convex sets**, and **cones**.

---

## 1) Affine sets and affine hull

### Definitions

* (A\subseteq\mathbb{R}^n) is **affine** if it contains the entire line through any two of its points:
  [
  x_1,x_2\in A\ \text{and}\ \theta\in\mathbb{R}\quad\Rightarrow\quad \theta x_1+(1-\theta) x_2\in A .
  ]
* The **affine hull** of (S), (\mathrm{aff}(S)), is the set of **all** affine combinations of points in (S). It’s the smallest affine set containing (S).

### Structure theorem (precise, useful)

A nonempty set (A) is affine **iff** there exists a subspace (S) and a point (x_0) such that
[
A = x_0 + S \ := \ { x_0 + s \mid s\in S}.
]
Equivalently, (A) is a translate of a linear subspace.
**Proof sketch.**
((\Rightarrow)) Fix (x_0\in A). Define (S={x-x_0:x\in A}). Show (S) is a subspace (closure follows from the line property).
((\Leftarrow)) If (A=x_0+S) with (S) a subspace, any affine combination of points in (A) remains in (A).

### Affine sets as solution sets

Every set of the form ({x\mid Fx=g}) is affine. Conversely, every nonempty affine set can be written as such for some (F,g) (take a basis of (S) above; encode orthogonality conditions to describe the translate).

---

## 2) Convex sets and convex hull

### Convexity

(C\subseteq\mathbb{R}^n) is **convex** if
[
x_1,x_2\in C,\ 0\le \theta\le 1 \ \Rightarrow\ \theta x_1 + (1-\theta) x_2 \in C.
]
We’ll also use that convexity is equivalent to “closed under **all finite** convex combinations.”

### Convex hull

For any (S\subseteq\mathbb{R}^n),
[
\mathrm{conv}(S)\ =\ \left{ \sum_{i=1}^k \theta_i x_i\ :\ x_i\in S,\ \theta_i\ge 0,\ \sum_i\theta_i=1 \right}.
]
It’s the smallest convex set containing (S).
**Useful theorem (Carathéodory).** In (\mathbb{R}^n), any point of (\mathrm{conv}(S)) can be expressed as a convex combination of at most (n+1) points of (S).
**Why this matters later:** it tightly bounds the number of “active” generators needed to represent a point in a convex hull.

---

## 3) Cones and proper cones

### Cones and convex cones

A set (K) is a **cone** if for every (x\in K) and (\alpha\ge 0), (\alpha x\in K).
It’s a **convex cone** if it is a cone and is convex; equivalently, it contains all conic combinations (\sum_i \theta_i x_i) with (\theta_i\ge 0).

### Proper cones (for generalized inequalities later)

A cone (K) is **proper** if it is:

* **convex**
* **closed**
* **solid** (nonempty interior)
* **pointed** (contains no line, i.e., (K\cap (-K)={0})).

Examples: (\mathbb{R}^n_+), the second-order cone, and (\mathbb{S}^n_+) (the PSD cone).

---

## 4) Canonical examples you must recognize on sight

Keep this as your “bird-watching guide” for convex sets.

### 4.1 Hyperplanes and halfspaces

* Hyperplane: (H={x\mid a^\top x=b}) with (a\ne 0) (affine (\Rightarrow) convex).
* Halfspace: ({x\mid a^\top x\le b}) (convex: a sublevel set of an affine function).

Geometry: (a) is normal to the hyperplane; moving (b) shifts the hyperplane along (\pm a).

### 4.2 Boxes, simplices, and balls

* **Box:** ({x\mid \ell\le x \le u}) (componentwise inequalities).
* **Probability simplex:** (\Delta^n={x\in\mathbb{R}^n\mid \mathbf{1}^\top x=1,\ x\ge 0}).
* **Euclidean ball:** (B_2(c,r)={x\mid |x-c|_2\le r}) (convex; strictly convex boundary).

### 4.3 Ellipsoids (linear images of balls)

[
E(c,P) = {x\in\mathbb{R}^n\mid (x-c)^\top P^{-1}(x-c)\le 1},\quad P\succ 0.
]
Diagonalize (P=U\Lambda U^\top); with (y=U^\top(x-c)), the equation becomes (\sum_i y_i^2/\lambda_i\le 1).
**Axes:** columns of (U). **Half-widths:** (1/\sqrt{\lambda_i}).
**Key fact:** ellipsoids are convex (inverse image of the 2-norm ball under an invertible affine map).

### 4.4 Polyhedra

[
\mathcal{P}={x\mid A x \le b,\ Cx=d}
]
(intersection of finitely many halfspaces/hyperplanes). Convex by construction. Vertices/extreme points belong to polyhedral theory—still set-level—but we won’t need vertex theory yet.

### 4.5 Norm balls and norm cones

Given any norm (|\cdot|):

* **Ball:** ({x\mid |x-x_c|\le r}) is convex.
* **Norm cone:** (\mathcal{K}_{|\cdot|}={(x,t)\mid |x|\le t}) is a convex cone.

Important instances:

* **Second-order cone (SOC):** ({(x,t)\in\mathbb{R}^n\times\mathbb{R}\mid |x|_2\le t}).
* **(\ell_1)-cone / (\ell_\infty)-cone:** ({(x,t)\mid |x|*1\le t}) and ({(x,t)\mid |x|*\infty\le t}).

### 4.6 PSD cone

[
\mathbb{S}^n_+ = {X\in\mathbb{R}^{n\times n}\mid X=X^\top,\ v^\top X v \ge 0\ \forall v}.
]
Convex because (v^\top(\theta X_1+(1-\theta)X_2)v = \theta v^\top X_1 v + (1-\theta)v^\top X_2 v\ge 0).

---

## 5) Operations that preserve convexity (how to prove things fast)

These are your “closure properties.” Use them to avoid first-principles proofs.

1. **Intersection:** (\bigcap_{i\in I} C_i) is convex if every (C_i) is convex (any index set (I), finite or infinite).
2. **Affine image:** If (C) is convex and (f(x)=Ax+b), then (f(C)) is convex.
3. **Affine preimage:** If (C) is convex and (f) is affine, ({x\mid f(x)\in C}) is convex.
4. **Cartesian product:** (C\times D) is convex if (C) and (D) are convex.
5. **Minkowski sum:** (C+D={x+y\mid x\in C, y\in D}) is convex if (C,D) are convex.
6. **Perspective map:** ((x,t)\mapsto x/t) with (t>0) preserves convexity of appropriate sets.
7. **Linear-fractional map:** (x\mapsto \frac{Ax+b}{c^\top x + d}) on domains with positive denominator; it’s an affine map of a perspective, hence convexity-preserving on its domain.

**Proof pattern (affine image):** for (y_i=f(x_i)\in f(C)), (\theta y_1+(1-\theta)y_2 = f(\theta x_1+(1-\theta) x_2)\in f(C)).
**Perspective “(\alpha)-trick”:**
[
\frac{\theta x_1+(1-\theta) x_2}{\theta t_1+(1-\theta) t_2}
=\underbrace{\frac{\theta t_1}{\theta t_1+(1-\theta)t_2}}_{\alpha}\frac{x_1}{t_1}
+\big(1-\alpha\big)\frac{x_2}{t_2},\ \alpha\in[0,1].
]

---

## 6) Distance to a convex set, projection, and supporting/separating hyperplanes

### Distance and projection

For nonempty closed convex (C),
[
\mathrm{dist}(y,C)=\inf_{x\in C}|y-x|_2
]
is attained uniquely at a point (p=\Pi_C(y)) (the **projection**).

**Rigorous characterization (orthogonality):**
[
p=\Pi_C(y) \quad\Longleftrightarrow\quad (y-p)^\top (x-p)\le 0\quad\forall x\in C .
]
Interpretation: the residual (y-p) makes an obtuse angle with every feasible direction (x-p) that stays inside (C).
**Proof idea.** Consider (g(x)=\tfrac12|x-y|_2^2). Over a convex set, first-order optimality reduces to the inequality above via directional derivatives.

### Supporting hyperplane theorem

If (C) is closed, convex, and (x_0\in\partial C), there exists (a\ne 0) such that
[
a^\top x \le a^\top x_0\quad \forall x\in C .
]
Construction: take any (y\notin C), let (p=\Pi_C(y)), set (a=y-p). The hyperplane with normal (a) through (p) supports (C); now let (y\to x_0) along an exterior sequence.

### Separating hyperplane theorem

If (C,D) are nonempty disjoint convex sets, there exists (a\ne 0) and (\alpha) with
[
a^\top x\le \alpha\ \forall x\in C,\qquad a^\top y\ge \alpha\ \forall y\in D.
]
If, say, (C) is compact, you can get **strict** separation ((<) and (>)).
**Classic construction:** take (p=\Pi_{C-D}(0)). If (0\notin C-D), ((C-D)) is closed and convex, and (p\ne 0). Use (a=p) to separate (C) and (D).

---

## 7) Dual cones (the geometry of “nonnegative with respect to a cone”)

Given an inner product (\langle\cdot,\cdot\rangle) (default (x^\top y)), the **dual cone** of (K) is
[
K^*={y\mid \langle y,x\rangle \ge 0\ \ \forall x\in K}.
]

### Must-know properties

* (K^*) is always closed and convex (intersection of halfspaces).
* If (K) is a closed convex cone, then ((K^*)^* = K).
* Inclusion reverses under duality: if (K_1\subseteq K_2) then (K_2^*\subseteq K_1^*).
* Linear image rule (invertible case): ((A K)^* = A^{-\top} K^*).
* Sum/intersection rules: ((K_1+K_2)^* = K_1^* \cap K_2^*), and ((K_1\cap K_2)^* = \mathrm{cl},(K_1^* + K_2^*)).

### Canonical examples (compute them explicitly)

* ((\mathbb{R}^n_+)^* = \mathbb{R}^n_+) (componentwise nonnegativity is self-dual).
* **SOC is self-dual.** For ((x,t)) and ((y,s)), Cauchy–Schwarz gives
  [
  y^\top x + s t \ \ge\ -|y|_2|x|_2 + s t,
  ]
  and if (s\ge |y|_2) and (t\ge |x|_2), then the inner product is (\ge 0). The reverse inclusion uses a separating argument.
* (\ell_1)-cone and (\ell_\infty)-cone are duals:
  ({(x,t)\mid |x|*1\le t}^*={(y,s)\mid |y|*\infty\le s}).
* ((\mathbb{S}^n_+)^* = \mathbb{S}^n_+) under (\langle X,Y\rangle=\mathrm{tr}(X Y)).

---

## 8) Worked patterns (cookbook proofs you’ll reuse)

1. **Convexity of LMI sets.**
   ({x\mid \sum_i x_i A_i + B \succeq 0}) is convex: it’s the **preimage** of the PSD cone under an affine map (x\mapsto \sum_i x_i A_i + B).

2. **SOC representations via affine maps.**
   If (C={(x,t):|Mx+q|_2\le a^\top x+b}) with (a^\top x + b\ge 0) on the domain, then (C) is the **preimage** of the SOC via (x\mapsto (Mx+q,\ a^\top x+b)).

3. **Ellipsoid convexity without calculus.**
   (E(c,P)) is an **affine preimage** of a ball: (x\in E) iff (|P^{-1/2}(x-c)|_2\le 1). Balls are convex, affine preimage preserves convexity.

4. **Perspective trick in (\mathbb{R}^2).**
   Given a convex set (C\subset{(x,t)\mid t>0}), the image ({x/t\mid (x,t)\in C}) is convex. Use the (\alpha)-trick once, and you’re done.

---

## 9) Exercises (integrated, thorough, solutions included)

> These align with common “Lecture 02” exercise themes. They avoid convex **functions** and anything duality/KKT-ish, keeping us clean for later lectures.

### A. Recognition & classification

**A1.** For each set below, classify as “affine / convex / cone (convex cone) / none”; justify:

1. ({x\mid a^\top x = b}).
2. ({x\mid a^\top x \le b}).
3. ({x\mid |x|_\infty \le 1}).
4. ({(x,t)\mid |x|_2 \le t}).
5. ({x\mid x_1 x_2\le 1,\ x\ge 0}).
   **Solution.** (1) affine (and convex). (2) convex. (3) convex (unit (\ell_\infty)-ball). (4) convex cone (SOC). (5) not convex (hyperbola branch; midpoints violate inequality).

**A2.** Prove: the image of a line under an affine map is a line (or a point).
**Solution.** (f(\theta x_1+(1-\theta)x_2) = \theta f(x_1)+(1-\theta)f(x_2)).

**A3.** Show: if (C) is convex, then (\mathrm{aff}(C)) is the smallest affine set containing (C).
**Solution.** The “smallest” part follows since any affine set containing (C) must contain all affine combinations, i.e., (\mathrm{aff}(C)).

---

### B. Building convex sets

**B1.** Show (\bigcap_{i\in I} C_i) is convex if all (C_i) are convex (arbitrary index set).
**Solution.** A convex combination lying in all (C_i) stays in each (C_i).

**B2.** If (C,D) are convex, prove (C+D) is convex.
**Solution.** Combine convex combinations in each set and add.

**B3.** Prove the affine preimage rule: ({x\mid A x + b\in C}) is convex for convex (C).
**Solution.** Pull back convex combinations through linearity.

**B4.** Use perspective to show: ({x/t\mid (x,t)\in C,\ t>0}) is convex when (C) is convex.
**Solution.** The (\alpha)-trick in §5.

---

### C. Convex hull and Carathéodory

**C1.** Prove: (\mathrm{conv}(S)) equals the intersection of all convex supersets of (S).
**Solution.** One inclusion by definition; the other because (\mathrm{conv}(S)) is convex and contains (S).

**C2.** In (\mathbb{R}^2), prove any point of (\mathrm{conv}(S)) is a convex combination of at most three points of (S).
**Solution.** Specialize Carathéodory. If (\sum_{i=1}^k\theta_i x_i) with (k>3), points are affinely dependent; drop one coefficient without leaving the point.

**C3.** Let (S={x_1,\ldots,x_m}\subset\mathbb{R}^n). Show: if (x=\sum_{i=1}^m \theta_i x_i) with (\theta\ge 0), (\sum \theta_i=1), then there exists a representation using at most (n+1) points.
**Solution.** Same Carathéodory argument: resolve affine dependence in coefficients.

---

### D. Distance, projection, and support

**D1.** Prove the projection characterization: (p=\Pi_C(y)) iff ((y-p)^\top(x-p)\le 0) for all (x\in C).
**Solution.** From convexity of (C) and convex differentiability of (\tfrac12|x-y|^2): first-order optimality over (C).

**D2.** For a closed convex (C) and (y\notin C), show the hyperplane with normal (a=y-\Pi_C(y)) strictly separates (y) and (C).
**Solution.** If (p=\Pi_C(y)), then (a^\top x \le a^\top p < a^\top y) for all (x\in C).

**D3.** Let (C={x\mid Ax\le b}) be a nonempty polyhedron. Show any boundary point admits a supporting hyperplane (a^\top x = a^\top x_0).
**Solution.** Either from active constraints (choose (a) as a positive combination of active rows of (A)) or by D2 with a sequence.

---

### E. Dual cones

**E1.** Compute ((\mathbb{R}^n_+)^*).
**Solution.** Vectors with nonnegative components; both inclusions are straightforward.

**E2.** Show SOC is self-dual.
**Solution.** Use Cauchy–Schwarz for one inclusion; for the other, separate any point outside SOC from SOC to build a witness with nonnegative inner product only for SOC members.

**E3.** Show the dual of ({(x,t)\mid |x|*1\le t}) is ({(y,s)\mid |y|*\infty\le s}).
**Solution.** Holder’s inequality bounds (y^\top x + s t\ge 0) exactly when (|y|_\infty\le s).

**E4.** Prove ((K_1+K_2)^*=K_1^*\cap K_2^*).
**Solution.** For (y) to be nonnegative on all sums (x_1+x_2) is equivalent to being nonnegative on each cone individually.

---

## 10) Common pitfalls (little dragons to avoid)

* “Affine” (\neq) “linear.” Affine sets include translates of subspaces; linear sets must contain the origin.
* Checking convexity of a complicated set directly is error-prone; **reduce** to basic sets via the operations in §5.
* For projections, remember **closed + convex** for existence/uniqueness; drop either and it can fail.
* Dual cones depend on the chosen **inner product**; here we use the standard one unless stated otherwise.

---

## 11) Minimal pocket card (exam-speed memory)

* Affine (=) closed under lines; convex (=) closed under segments; cone (=) closed under nonnegative scaling/sums.
* **Prove convexity** via: intersection, affine image/preimage, Minkowski sum, product, perspective, linear-fractional.
* **Projection**: (p=\Pi_C(y)) iff ((y-p)^\top(x-p)\le 0) for all (x\in C).
* **Separation & support**: disjoint convex sets can be separated; every boundary point has a supporting hyperplane.
* **Dual cones**: ((K^*)^*=K) (for closed convex cones); SOC, (\mathbb{R}^n_+), and (\mathbb{S}^n_+) are self-dual.

---

## 12) Repo-ready deliverables (no function overlap)

I. `02-convex-sets/notes.md`

* Full content of §§0–11 above, with short, labeled proofs ready for board or slides.

II. `02-convex-sets/pset.md` (Exercises A–E)

* Exactly the problems listed with concise, rigorous solutions.
* Each problem is self-contained and avoids convex **functions** entirely.

III. `02-convex-sets/board-proofs.md`

* One-page, step-by-step derivations for: affine preimage/image; perspective (\alpha)-trick; ellipsoid convexity via affine preimage; projection characterization; SOC self-duality.


## What to add so nothing is missing

Below is a tight, Lecture-02-only **supplement** (problems + solutions) that fills those exact gaps while staying clear of any future-lecture material (no convex **functions**, no duality/KKT, no algorithms).

---

# Supplemental Exercises for Lecture 02 (with solutions)

### P2.S1 — Perspective & linear-fractional, convexity and domain

**(a)** Let (C\subset\mathbb{R}^{n+1}) be convex and contained in ({(x,t)\mid t>0}). Show (\mathcal{P}(C):={x/t\mid (x,t)\in C}) is convex.
**Solution.** For ((x_i,t_i)\in C) and (\theta\in[0,1]), convexity of (C) gives ((\bar x,\bar t)=(\theta x_1+(1-\theta)x_2,\ \theta t_1+(1-\theta)t_2)\in C), (\bar t>0). Then
[
\frac{\bar x}{\bar t}
=\frac{\theta t_1}{\bar t}\frac{x_1}{t_1}
+\frac{(1-\theta) t_2}{\bar t}\frac{x_2}{t_2},
]
a convex combination of (x_i/t_i).
**(b)** Let (f(x)=\dfrac{Ax+b}{c^\top x + d}) with (c^\top x + d>0) on a convex domain (D). Show (f(D)) is convex whenever (D) is.
**Solution.** Write (f(x)) as an **affine map of a perspective**: apply (a) to ((x,1)\mapsto (Ax+b, c^\top x + d)), then divide.

---

### P2.S2 — Affine image & inverse image (nontrivial example)

Let (F:\mathbb{R}^n\to\mathbb{S}^m) be (F(x)=B+\sum_{i=1}^n x_i A_i). Prove the set
[
\mathcal{L}={x\in\mathbb{R}^n\mid F(x)\succeq 0}
]
is convex.
**Solution.** (\mathcal{L}=F^{-1}(\mathbb{S}^m_+)) is an **affine preimage** of the PSD cone, which is convex. Preimage of a convex set under an affine map is convex.

---

### P2.S3 — Proper cones & generalized inequalities

Let (K\subset\mathbb{R}^n) be a **proper cone** (closed, convex, pointed, solid). Define (x\preceq_K y \iff y-x\in K).
**(a)** Prove (\preceq_K) is a partial order on (\mathbb{R}^n).
**Solution.** Reflexive: (x-x=0\in K). Antisymmetric: if (y-x\in K) and (x-y\in K), then (y-x\in K\cap(-K)={0}) (pointedness) ⇒ (x=y). Transitive: (z-y\in K), (y-x\in K) ⇒ (z-x=(z-y)+(y-x)\in K) (conicity & convexity).
**(b)** Give an example showing a set can have **minimal** but no **minimum** elements under (\preceq_K).
**Example.** In (\mathbb{R}^2) with (K=\mathbb{R}^2_+), the set (C={(1,t)\mid t>0}) has no element ((1,t^*)) that is (\preceq_K)-below all others, but every point is minimal (no strictly smaller point remains in (C)).

---

### P2.S4 — Dual cones: SOC self-duality and (\ell_1)/(\ell_\infty)

**(a) SOC is self-dual.** Let (\mathcal{Q}={(x,t)\mid |x|_2\le t}). Show (\mathcal{Q}^*=\mathcal{Q}).
**Solution.** If ((y,s)\in\mathcal{Q}), then for any ((x,t)\in\mathcal{Q}):
(y^\top x + st \ge -|y|_2|x|_2 + st \ge -s t + s t = 0) by Cauchy–Schwarz and (|x|_2\le t,\ |y|_2\le s). Hence ((y,s)\in\mathcal{Q}^*). Conversely, if ((y,s)\notin\mathcal{Q}) then (|y|_2> s); pick ((x,t)=(y,|y|*2)\in\mathcal{Q}) to get (y^\top x + st = |y|*2^2 + s|y|*2 < 0), so ((y,s)\notin\mathcal{Q}^*).
**(b)** Dual of the (\ell_1) cone is the (\ell*\infty) cone.
[
{(x,t)\mid |x|*1\le t}^*
={(y,s)\mid |y|*\infty \le s,\ s\ge 0}.
]
**Solution.** For any (x) with (|x|*1\le t), Hölder gives (y^\top x \ge -|y|*\infty |x|*1). Thus (y^\top x + s t \ge t(s-|y|*\infty)\ge 0) iff (s\ge |y|*\infty). The reverse inclusion: if (s<|y|*\infty), pick (x) concentrating mass on an index where (|y_i|) is maximal with sign to make the sum negative.

---

### P2.S5 — Separating hyperplanes (closed/compact variants)

Let (C,D\subset\mathbb{R}^n) be nonempty, disjoint, convex.
**(a)** Prove the existence of a (non-strict) separating hyperplane.
**Solution.** Consider (C-D={c-d}). It is closed and convex, (0\notin C-D). Let (p=\Pi_{C-D}(0)\neq 0). Take (a=p), (\alpha=\frac12\max_{z\in C-D} a^\top z=\frac12 a^\top p). Then (a^\top c\le \alpha \le a^\top d).
**(b)** If one set is compact, show **strict** separation is possible.
**Solution.** Distance between closed convex sets is attained; with positive distance, you can shift the offset to strict inequalities.

---

### P2.S6 — Supporting hyperplanes: polyhedra and active constraints

Let (P={x\mid Ax\le b}) be a nonempty polyhedron. Fix (x_0\in\partial P) and let (I={i\mid a_i^\top x_0=b_i}) denote the active constraints.
**(a)** Prove that for some nonnegative multipliers (\lambda) supported on (I), (a=\sum_{i\in I}\lambda_i a_i) defines a supporting hyperplane (a^\top x \le a^\top x_0) for all (x\in P).
**Solution.** For (x\in P), (a^\top x - a^\top x_0 = \sum_{i\in I}\lambda_i(a_i^\top x - b_i)\le 0).
**(b)** Give a 2D example where multiple distinct supporting normals exist at a corner.
**Answer.** At a vertex of a polygon, any positive combination of the two edge normals is a valid supporting normal.

---

